{"ast":null,"code":"import { inBrowser } from \"../utils/index.mjs\";\nimport { onDeactivated, onBeforeUnmount } from \"vue\";\nimport { onMountedOrActivated } from \"@vant/use\";\n\nfunction useVisibilityChange(target, onChange) {\n  if (!inBrowser || !window.IntersectionObserver) {\n    return;\n  }\n\n  const observer = new IntersectionObserver(entries => {\n    onChange(entries[0].intersectionRatio > 0);\n  }, {\n    root: document.body\n  });\n\n  const observe = () => {\n    if (target.value) {\n      observer.observe(target.value);\n    }\n  };\n\n  const unobserve = () => {\n    if (target.value) {\n      observer.unobserve(target.value);\n    }\n  };\n\n  onDeactivated(unobserve);\n  onBeforeUnmount(unobserve);\n  onMountedOrActivated(observe);\n}\n\nexport { useVisibilityChange };","map":{"version":3,"names":["inBrowser","onDeactivated","onBeforeUnmount","onMountedOrActivated","useVisibilityChange","target","onChange","window","IntersectionObserver","observer","entries","intersectionRatio","root","document","body","observe","value","unobserve"],"sources":["D:/web/my-blog/node_modules/vant/es/composables/use-visibility-change.mjs"],"sourcesContent":["import { inBrowser } from \"../utils/index.mjs\";\nimport { onDeactivated, onBeforeUnmount } from \"vue\";\nimport { onMountedOrActivated } from \"@vant/use\";\nfunction useVisibilityChange(target, onChange) {\n  if (!inBrowser || !window.IntersectionObserver) {\n    return;\n  }\n  const observer = new IntersectionObserver((entries) => {\n    onChange(entries[0].intersectionRatio > 0);\n  }, { root: document.body });\n  const observe = () => {\n    if (target.value) {\n      observer.observe(target.value);\n    }\n  };\n  const unobserve = () => {\n    if (target.value) {\n      observer.unobserve(target.value);\n    }\n  };\n  onDeactivated(unobserve);\n  onBeforeUnmount(unobserve);\n  onMountedOrActivated(observe);\n}\nexport {\n  useVisibilityChange\n};\n"],"mappings":"AAAA,SAASA,SAAT,QAA0B,oBAA1B;AACA,SAASC,aAAT,EAAwBC,eAAxB,QAA+C,KAA/C;AACA,SAASC,oBAAT,QAAqC,WAArC;;AACA,SAASC,mBAAT,CAA6BC,MAA7B,EAAqCC,QAArC,EAA+C;EAC7C,IAAI,CAACN,SAAD,IAAc,CAACO,MAAM,CAACC,oBAA1B,EAAgD;IAC9C;EACD;;EACD,MAAMC,QAAQ,GAAG,IAAID,oBAAJ,CAA0BE,OAAD,IAAa;IACrDJ,QAAQ,CAACI,OAAO,CAAC,CAAD,CAAP,CAAWC,iBAAX,GAA+B,CAAhC,CAAR;EACD,CAFgB,EAEd;IAAEC,IAAI,EAAEC,QAAQ,CAACC;EAAjB,CAFc,CAAjB;;EAGA,MAAMC,OAAO,GAAG,MAAM;IACpB,IAAIV,MAAM,CAACW,KAAX,EAAkB;MAChBP,QAAQ,CAACM,OAAT,CAAiBV,MAAM,CAACW,KAAxB;IACD;EACF,CAJD;;EAKA,MAAMC,SAAS,GAAG,MAAM;IACtB,IAAIZ,MAAM,CAACW,KAAX,EAAkB;MAChBP,QAAQ,CAACQ,SAAT,CAAmBZ,MAAM,CAACW,KAA1B;IACD;EACF,CAJD;;EAKAf,aAAa,CAACgB,SAAD,CAAb;EACAf,eAAe,CAACe,SAAD,CAAf;EACAd,oBAAoB,CAACY,OAAD,CAApB;AACD;;AACD,SACEX,mBADF"},"metadata":{},"sourceType":"module"}