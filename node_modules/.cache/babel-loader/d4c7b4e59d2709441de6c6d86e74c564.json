{"ast":null,"code":"import { createVNode as _createVNode } from \"vue\";\nimport { ref, watch, reactive, defineComponent } from \"vue\";\nimport { deepClone } from \"../utils/deep-clone.mjs\";\nimport { clamp, isObject, unknownProp, numericProp, makeArrayProp, makeNumberProp, preventDefault, createNamespace, makeRequiredProp } from \"../utils/index.mjs\";\nimport { useParent } from \"@vant/use\";\nimport { useTouch } from \"../composables/use-touch.mjs\";\nimport { useExpose } from \"../composables/use-expose.mjs\";\nconst DEFAULT_DURATION = 200;\nconst MOMENTUM_LIMIT_TIME = 300;\nconst MOMENTUM_LIMIT_DISTANCE = 15;\nconst [name, bem] = createNamespace(\"picker-column\");\n\nfunction getElementTranslateY(element) {\n  const {\n    transform\n  } = window.getComputedStyle(element);\n  const translateY = transform.slice(7, transform.length - 1).split(\", \")[5];\n  return Number(translateY);\n}\n\nconst PICKER_KEY = Symbol(name);\n\nconst isOptionDisabled = option => isObject(option) && option.disabled;\n\nvar stdin_default = defineComponent({\n  name,\n  props: {\n    textKey: makeRequiredProp(String),\n    readonly: Boolean,\n    allowHtml: Boolean,\n    className: unknownProp,\n    itemHeight: makeRequiredProp(Number),\n    defaultIndex: makeNumberProp(0),\n    swipeDuration: makeRequiredProp(numericProp),\n    initialOptions: makeArrayProp(),\n    visibleItemCount: makeRequiredProp(numericProp)\n  },\n  emits: [\"change\"],\n\n  setup(props, {\n    emit,\n    slots\n  }) {\n    let moving;\n    let startOffset;\n    let touchStartTime;\n    let momentumOffset;\n    let transitionEndTrigger;\n    const wrapper = ref();\n    const state = reactive({\n      index: props.defaultIndex,\n      offset: 0,\n      duration: 0,\n      options: deepClone(props.initialOptions)\n    });\n    const touch = useTouch();\n\n    const count = () => state.options.length;\n\n    const baseOffset = () => props.itemHeight * (+props.visibleItemCount - 1) / 2;\n\n    const adjustIndex = index => {\n      index = clamp(index, 0, count());\n\n      for (let i = index; i < count(); i++) {\n        if (!isOptionDisabled(state.options[i])) return i;\n      }\n\n      for (let i = index - 1; i >= 0; i--) {\n        if (!isOptionDisabled(state.options[i])) return i;\n      }\n    };\n\n    const setIndex = (index, emitChange) => {\n      index = adjustIndex(index) || 0;\n      const offset = -index * props.itemHeight;\n\n      const trigger = () => {\n        if (index !== state.index) {\n          state.index = index;\n\n          if (emitChange) {\n            emit(\"change\", index);\n          }\n        }\n      };\n\n      if (moving && offset !== state.offset) {\n        transitionEndTrigger = trigger;\n      } else {\n        trigger();\n      }\n\n      state.offset = offset;\n    };\n\n    const setOptions = options => {\n      if (JSON.stringify(options) !== JSON.stringify(state.options)) {\n        state.options = deepClone(options);\n        setIndex(props.defaultIndex);\n      }\n    };\n\n    const onClickItem = index => {\n      if (moving || props.readonly) {\n        return;\n      }\n\n      transitionEndTrigger = null;\n      state.duration = DEFAULT_DURATION;\n      setIndex(index, true);\n    };\n\n    const getOptionText = option => {\n      if (isObject(option) && props.textKey in option) {\n        return option[props.textKey];\n      }\n\n      return option;\n    };\n\n    const getIndexByOffset = offset => clamp(Math.round(-offset / props.itemHeight), 0, count() - 1);\n\n    const momentum = (distance, duration) => {\n      const speed = Math.abs(distance / duration);\n      distance = state.offset + speed / 3e-3 * (distance < 0 ? -1 : 1);\n      const index = getIndexByOffset(distance);\n      state.duration = +props.swipeDuration;\n      setIndex(index, true);\n    };\n\n    const stopMomentum = () => {\n      moving = false;\n      state.duration = 0;\n\n      if (transitionEndTrigger) {\n        transitionEndTrigger();\n        transitionEndTrigger = null;\n      }\n    };\n\n    const onTouchStart = event => {\n      if (props.readonly) {\n        return;\n      }\n\n      touch.start(event);\n\n      if (moving) {\n        const translateY = getElementTranslateY(wrapper.value);\n        state.offset = Math.min(0, translateY - baseOffset());\n        startOffset = state.offset;\n      } else {\n        startOffset = state.offset;\n      }\n\n      state.duration = 0;\n      touchStartTime = Date.now();\n      momentumOffset = startOffset;\n      transitionEndTrigger = null;\n    };\n\n    const onTouchMove = event => {\n      if (props.readonly) {\n        return;\n      }\n\n      touch.move(event);\n\n      if (touch.isVertical()) {\n        moving = true;\n        preventDefault(event, true);\n      }\n\n      state.offset = clamp(startOffset + touch.deltaY.value, -(count() * props.itemHeight), props.itemHeight);\n      const now = Date.now();\n\n      if (now - touchStartTime > MOMENTUM_LIMIT_TIME) {\n        touchStartTime = now;\n        momentumOffset = state.offset;\n      }\n    };\n\n    const onTouchEnd = () => {\n      if (props.readonly) {\n        return;\n      }\n\n      const distance = state.offset - momentumOffset;\n      const duration = Date.now() - touchStartTime;\n      const allowMomentum = duration < MOMENTUM_LIMIT_TIME && Math.abs(distance) > MOMENTUM_LIMIT_DISTANCE;\n\n      if (allowMomentum) {\n        momentum(distance, duration);\n        return;\n      }\n\n      const index = getIndexByOffset(state.offset);\n      state.duration = DEFAULT_DURATION;\n      setIndex(index, true);\n      setTimeout(() => {\n        moving = false;\n      }, 0);\n    };\n\n    const renderOptions = () => {\n      const optionStyle = {\n        height: `${props.itemHeight}px`\n      };\n      return state.options.map((option, index) => {\n        const text = getOptionText(option);\n        const disabled = isOptionDisabled(option);\n        const data = {\n          role: \"button\",\n          style: optionStyle,\n          tabindex: disabled ? -1 : 0,\n          class: bem(\"item\", {\n            disabled,\n            selected: index === state.index\n          }),\n          onClick: () => onClickItem(index)\n        };\n        const childData = {\n          class: \"van-ellipsis\",\n          [props.allowHtml ? \"innerHTML\" : \"textContent\"]: text\n        };\n        return _createVNode(\"li\", data, [slots.option ? slots.option(option) : _createVNode(\"div\", childData, null)]);\n      });\n    };\n\n    const setValue = value => {\n      const {\n        options\n      } = state;\n\n      for (let i = 0; i < options.length; i++) {\n        if (getOptionText(options[i]) === value) {\n          return setIndex(i);\n        }\n      }\n    };\n\n    const getValue = () => state.options[state.index];\n\n    const hasOptions = () => state.options.length;\n\n    setIndex(state.index);\n    useParent(PICKER_KEY);\n    useExpose({\n      state,\n      setIndex,\n      getValue,\n      setValue,\n      setOptions,\n      hasOptions,\n      stopMomentum\n    });\n    watch(() => props.initialOptions, setOptions);\n    watch(() => props.defaultIndex, value => setIndex(value));\n    return () => _createVNode(\"div\", {\n      \"class\": [bem(), props.className],\n      \"onTouchstart\": onTouchStart,\n      \"onTouchmove\": onTouchMove,\n      \"onTouchend\": onTouchEnd,\n      \"onTouchcancel\": onTouchEnd\n    }, [_createVNode(\"ul\", {\n      \"ref\": wrapper,\n      \"style\": {\n        transform: `translate3d(0, ${state.offset + baseOffset()}px, 0)`,\n        transitionDuration: `${state.duration}ms`,\n        transitionProperty: state.duration ? \"all\" : \"none\"\n      },\n      \"class\": bem(\"wrapper\"),\n      \"onTransitionend\": stopMomentum\n    }, [renderOptions()])]);\n  }\n\n});\nexport { PICKER_KEY, stdin_default as default };","map":{"version":3,"names":["createVNode","_createVNode","ref","watch","reactive","defineComponent","deepClone","clamp","isObject","unknownProp","numericProp","makeArrayProp","makeNumberProp","preventDefault","createNamespace","makeRequiredProp","useParent","useTouch","useExpose","DEFAULT_DURATION","MOMENTUM_LIMIT_TIME","MOMENTUM_LIMIT_DISTANCE","name","bem","getElementTranslateY","element","transform","window","getComputedStyle","translateY","slice","length","split","Number","PICKER_KEY","Symbol","isOptionDisabled","option","disabled","stdin_default","props","textKey","String","readonly","Boolean","allowHtml","className","itemHeight","defaultIndex","swipeDuration","initialOptions","visibleItemCount","emits","setup","emit","slots","moving","startOffset","touchStartTime","momentumOffset","transitionEndTrigger","wrapper","state","index","offset","duration","options","touch","count","baseOffset","adjustIndex","i","setIndex","emitChange","trigger","setOptions","JSON","stringify","onClickItem","getOptionText","getIndexByOffset","Math","round","momentum","distance","speed","abs","stopMomentum","onTouchStart","event","start","value","min","Date","now","onTouchMove","move","isVertical","deltaY","onTouchEnd","allowMomentum","setTimeout","renderOptions","optionStyle","height","map","text","data","role","style","tabindex","class","selected","onClick","childData","setValue","getValue","hasOptions","transitionDuration","transitionProperty","default"],"sources":["D:/项目/my-blog/node_modules/vant/es/picker/PickerColumn.mjs"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport { ref, watch, reactive, defineComponent } from \"vue\";\nimport { deepClone } from \"../utils/deep-clone.mjs\";\nimport { clamp, isObject, unknownProp, numericProp, makeArrayProp, makeNumberProp, preventDefault, createNamespace, makeRequiredProp } from \"../utils/index.mjs\";\nimport { useParent } from \"@vant/use\";\nimport { useTouch } from \"../composables/use-touch.mjs\";\nimport { useExpose } from \"../composables/use-expose.mjs\";\nconst DEFAULT_DURATION = 200;\nconst MOMENTUM_LIMIT_TIME = 300;\nconst MOMENTUM_LIMIT_DISTANCE = 15;\nconst [name, bem] = createNamespace(\"picker-column\");\nfunction getElementTranslateY(element) {\n  const {\n    transform\n  } = window.getComputedStyle(element);\n  const translateY = transform.slice(7, transform.length - 1).split(\", \")[5];\n  return Number(translateY);\n}\nconst PICKER_KEY = Symbol(name);\nconst isOptionDisabled = (option) => isObject(option) && option.disabled;\nvar stdin_default = defineComponent({\n  name,\n  props: {\n    textKey: makeRequiredProp(String),\n    readonly: Boolean,\n    allowHtml: Boolean,\n    className: unknownProp,\n    itemHeight: makeRequiredProp(Number),\n    defaultIndex: makeNumberProp(0),\n    swipeDuration: makeRequiredProp(numericProp),\n    initialOptions: makeArrayProp(),\n    visibleItemCount: makeRequiredProp(numericProp)\n  },\n  emits: [\"change\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    let moving;\n    let startOffset;\n    let touchStartTime;\n    let momentumOffset;\n    let transitionEndTrigger;\n    const wrapper = ref();\n    const state = reactive({\n      index: props.defaultIndex,\n      offset: 0,\n      duration: 0,\n      options: deepClone(props.initialOptions)\n    });\n    const touch = useTouch();\n    const count = () => state.options.length;\n    const baseOffset = () => props.itemHeight * (+props.visibleItemCount - 1) / 2;\n    const adjustIndex = (index) => {\n      index = clamp(index, 0, count());\n      for (let i = index; i < count(); i++) {\n        if (!isOptionDisabled(state.options[i]))\n          return i;\n      }\n      for (let i = index - 1; i >= 0; i--) {\n        if (!isOptionDisabled(state.options[i]))\n          return i;\n      }\n    };\n    const setIndex = (index, emitChange) => {\n      index = adjustIndex(index) || 0;\n      const offset = -index * props.itemHeight;\n      const trigger = () => {\n        if (index !== state.index) {\n          state.index = index;\n          if (emitChange) {\n            emit(\"change\", index);\n          }\n        }\n      };\n      if (moving && offset !== state.offset) {\n        transitionEndTrigger = trigger;\n      } else {\n        trigger();\n      }\n      state.offset = offset;\n    };\n    const setOptions = (options) => {\n      if (JSON.stringify(options) !== JSON.stringify(state.options)) {\n        state.options = deepClone(options);\n        setIndex(props.defaultIndex);\n      }\n    };\n    const onClickItem = (index) => {\n      if (moving || props.readonly) {\n        return;\n      }\n      transitionEndTrigger = null;\n      state.duration = DEFAULT_DURATION;\n      setIndex(index, true);\n    };\n    const getOptionText = (option) => {\n      if (isObject(option) && props.textKey in option) {\n        return option[props.textKey];\n      }\n      return option;\n    };\n    const getIndexByOffset = (offset) => clamp(Math.round(-offset / props.itemHeight), 0, count() - 1);\n    const momentum = (distance, duration) => {\n      const speed = Math.abs(distance / duration);\n      distance = state.offset + speed / 3e-3 * (distance < 0 ? -1 : 1);\n      const index = getIndexByOffset(distance);\n      state.duration = +props.swipeDuration;\n      setIndex(index, true);\n    };\n    const stopMomentum = () => {\n      moving = false;\n      state.duration = 0;\n      if (transitionEndTrigger) {\n        transitionEndTrigger();\n        transitionEndTrigger = null;\n      }\n    };\n    const onTouchStart = (event) => {\n      if (props.readonly) {\n        return;\n      }\n      touch.start(event);\n      if (moving) {\n        const translateY = getElementTranslateY(wrapper.value);\n        state.offset = Math.min(0, translateY - baseOffset());\n        startOffset = state.offset;\n      } else {\n        startOffset = state.offset;\n      }\n      state.duration = 0;\n      touchStartTime = Date.now();\n      momentumOffset = startOffset;\n      transitionEndTrigger = null;\n    };\n    const onTouchMove = (event) => {\n      if (props.readonly) {\n        return;\n      }\n      touch.move(event);\n      if (touch.isVertical()) {\n        moving = true;\n        preventDefault(event, true);\n      }\n      state.offset = clamp(startOffset + touch.deltaY.value, -(count() * props.itemHeight), props.itemHeight);\n      const now = Date.now();\n      if (now - touchStartTime > MOMENTUM_LIMIT_TIME) {\n        touchStartTime = now;\n        momentumOffset = state.offset;\n      }\n    };\n    const onTouchEnd = () => {\n      if (props.readonly) {\n        return;\n      }\n      const distance = state.offset - momentumOffset;\n      const duration = Date.now() - touchStartTime;\n      const allowMomentum = duration < MOMENTUM_LIMIT_TIME && Math.abs(distance) > MOMENTUM_LIMIT_DISTANCE;\n      if (allowMomentum) {\n        momentum(distance, duration);\n        return;\n      }\n      const index = getIndexByOffset(state.offset);\n      state.duration = DEFAULT_DURATION;\n      setIndex(index, true);\n      setTimeout(() => {\n        moving = false;\n      }, 0);\n    };\n    const renderOptions = () => {\n      const optionStyle = {\n        height: `${props.itemHeight}px`\n      };\n      return state.options.map((option, index) => {\n        const text = getOptionText(option);\n        const disabled = isOptionDisabled(option);\n        const data = {\n          role: \"button\",\n          style: optionStyle,\n          tabindex: disabled ? -1 : 0,\n          class: bem(\"item\", {\n            disabled,\n            selected: index === state.index\n          }),\n          onClick: () => onClickItem(index)\n        };\n        const childData = {\n          class: \"van-ellipsis\",\n          [props.allowHtml ? \"innerHTML\" : \"textContent\"]: text\n        };\n        return _createVNode(\"li\", data, [slots.option ? slots.option(option) : _createVNode(\"div\", childData, null)]);\n      });\n    };\n    const setValue = (value) => {\n      const {\n        options\n      } = state;\n      for (let i = 0; i < options.length; i++) {\n        if (getOptionText(options[i]) === value) {\n          return setIndex(i);\n        }\n      }\n    };\n    const getValue = () => state.options[state.index];\n    const hasOptions = () => state.options.length;\n    setIndex(state.index);\n    useParent(PICKER_KEY);\n    useExpose({\n      state,\n      setIndex,\n      getValue,\n      setValue,\n      setOptions,\n      hasOptions,\n      stopMomentum\n    });\n    watch(() => props.initialOptions, setOptions);\n    watch(() => props.defaultIndex, (value) => setIndex(value));\n    return () => _createVNode(\"div\", {\n      \"class\": [bem(), props.className],\n      \"onTouchstart\": onTouchStart,\n      \"onTouchmove\": onTouchMove,\n      \"onTouchend\": onTouchEnd,\n      \"onTouchcancel\": onTouchEnd\n    }, [_createVNode(\"ul\", {\n      \"ref\": wrapper,\n      \"style\": {\n        transform: `translate3d(0, ${state.offset + baseOffset()}px, 0)`,\n        transitionDuration: `${state.duration}ms`,\n        transitionProperty: state.duration ? \"all\" : \"none\"\n      },\n      \"class\": bem(\"wrapper\"),\n      \"onTransitionend\": stopMomentum\n    }, [renderOptions()])]);\n  }\n});\nexport {\n  PICKER_KEY,\n  stdin_default as default\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}