{"ast":null,"code":"import { createElementVNode as _createElementVNode, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-49cee7c9\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"root\"\n};\nconst _hoisted_2 = {\n  class: \"map\",\n  style: {\n    \"width\": \"100%\",\n    \"height\": \"300px\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.choose && $setup.choose(...args)),\n    id: \"container\",\n    style: {\n      \"width\": \"100%\",\n      \"height\": \"100%\"\n    }\n  })]), _createVNode($setup[\"maps\"], {\n    ref: \"cmap\",\n    onCityinfo: $setup.cityinfo,\n    jwd: $setup.address\n  }, null, 8\n  /* PROPS */\n  , [\"onCityinfo\", \"jwd\"])]);\n}","map":{"version":3,"mappings":";;;;;EAEOA,KAAK,EAAC;;;EACJA,KAAK,EAAC;EAAMC,KAAkC,EAAlC;IAAA;IAAA;EAAA;;;uBADnBC,oBAKM,KALN,cAKM,CAJJC,oBAEM,KAFN,cAEM,CADJA,oBAA0E,KAA1E,EAA0E;IAApEC,OAAK,yCAAEC,uCAAF,CAA+D;IAArDC,EAAE,EAAC,WAAkD;IAAtCL,KAA+B,EAA/B;MAAA;MAAA;IAAA;EAAsC,CAA1E,CACI,CAFN,CAII,EADJM,aAA4DF,cAA5D,EAA4D;IAAtDG,GAAG,EAAC,MAAkD;IAA1CC,UAAQ,EAAEJ,eAAgC;IAArBK,GAAG,EAAEL;EAAgB,CAA5D;;EAAA,wBACI,CALN","names":["class","style","_createElementBlock","_createElementVNode","onClick","$setup","id","_createVNode","ref","onCityinfo","jwd"],"sourceRoot":"","sources":["D:\\项目\\my-blog\\src\\components\\map\\map.vue"],"sourcesContent":["<!--显示当前位置组件-->\n<template>\n  <div class=\"root\">\n    <div class=\"map\" style=\"width: 100%;height: 300px;\">\n      <div @click=\"choose\" id=\"container\" style=\"width:100%; height:100%\"></div>\n    </div>\n    <maps ref=\"cmap\" @cityinfo=\"cityinfo\" :jwd=\"address\"></maps>\n  </div>\n</template>\n\n<script setup>\nimport maps from '@/components/map/components/chooseAddress.vue'\nimport {ref, onMounted} from \"vue\";\nimport {mainStore} from \"@/pinia\";\n// import {Route,Router} from 'vue-router'\n\nlet store = mainStore()\nlet cmap = ref(\"\")\n//当前位置信息\nlet address = ref({\n  lng: 121.392017,\n  lat: 28.58499\n})\n//当前缩放级别：\nlet zoom = ref(\"\");\n// 地图实列对象\nlet map = ref(\"\");\n// 标点实列对象\nlet marker = ref(\"\");\n//初始化地图\nconst initMap = function () {\n  map.value = new AMap.Map(\"container\", {\n    zoom: 14, //地图缩放级别\n    center: [address.value.lng, address.value.lat], //地图默认中心点坐标\n  });\n\n  //获取定位信息\n  getLocation()\n\n  // 创建点\n  addmarker();\n\n  // 自适应展示所有标记点\n  map.value.setFitView(marker.value);\n  // 这里的this指向构造函数的实例\n  zoom.value = map.value.getZoom();\n};\nlet addmarker = () => {\n\n  let markerContent =\n      \"<div><img style='width:21px;height:30px' src='https://img1.baidu.com/it/u=1462787434,1779325197&fm=253&fmt=auto&app=138&f=JPEG?w=341&h=499' /></div>\";\n  marker.value = new AMap.Marker({\n    position: new AMap.LngLat(address.value.lng, address.value.lat),\n\n    content: markerContent, //自定义marker内容\n  });\n\n  // 将创建的点标记添加到已有的地图实例：\n  map.value.add(marker.value);\n  // 修改地图的中心点为图标的中间\n  map.value.setCenter([address.value.lng, address.value.lat]);\n};\nlet getLocation = () => {\n  AMap.plugin('AMap.Geolocation', function () {\n    var geolocation = new AMap.Geolocation({\n      // 是否使用高精度定位，默认：true\n      enableHighAccuracy: true,\n      // 设置定位超时时间，默认：无穷大\n      timeout: 10000,\n      // 定位按钮的停靠位置的偏移量，默认：Pixel(10, 20)\n      buttonOffset: new AMap.Pixel(10, 20),\n      //  定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false\n      zoomToAccuracy: true,\n      //  定位按钮的排放位置,  RB表示右下\n      buttonPosition: 'RB'\n    })\n\n    geolocation.getCurrentPosition()\n    AMap.event.addListener(geolocation, 'complete', onComplete)\n    AMap.event.addListener(geolocation, 'error', onError)\n\n    function onComplete(data) {\n      console.log(data.formattedAddress, '成功')\n      // alert(data.formattedAddress)\n      // data是具体的定位信息\n    }\n\n    function onError(data) {\n      console.log(data, '失败')\n      // 定位出错\n    }\n  })\n}\n\n//打开地图选择位置\nlet choose = () => {\n  cmap.value.shows()\n}\n//选择位置返回的信息\nlet cityinfo = (e) => {\n  console.log(e.address,123123123)\n}\n\nonMounted(() => {\n\n  initMap()\n})\n</script>\n\n<style scoped lang=\"less\">\n.topbar {\n  background: rgba(0, 0, 0, 0.2);\n  width: calc(100% - 30px);\n  display: flex;\n  align-content: center;\n  justify-content: space-between;\n  position: absolute;\n  z-index: 9999;\n  top: 0;\n  left: 0;\n  padding: 15px;\n  font-size: 16px;\n  //   font-weight: bold;\n  .l {\n    color: white;\n    background: red;\n    padding: 10px 25px;\n    border-radius: 10px;\n  }\n\n  .r {\n    background: #2cdb71;\n    padding: 10px 25px;\n    border-radius: 10px;\n    color: white;\n  }\n}\n</style>"]},"metadata":{},"sourceType":"module"}