{"ast":null,"code":"import { nextTick } from \"vue\";\nimport { inBrowser, getScrollParent } from \"@vant/use\";\nimport { remove, on, off, throttle, supportWebp, getDPR, getBestSelectionFromSrcset, hasIntersectionObserver, modeType, ImageCache } from \"./util.mjs\";\nimport { isObject } from \"../../utils/index.mjs\";\nimport ReactiveListener from \"./listener.mjs\";\nconst DEFAULT_URL = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\nconst DEFAULT_EVENTS = [\"scroll\", \"wheel\", \"mousewheel\", \"resize\", \"animationend\", \"transitionend\", \"touchmove\"];\nconst DEFAULT_OBSERVER_OPTIONS = {\n  rootMargin: \"0px\",\n  threshold: 0\n};\n\nfunction stdin_default() {\n  return class Lazy {\n    constructor({\n      preLoad,\n      error,\n      throttleWait,\n      preLoadTop,\n      dispatchEvent,\n      loading,\n      attempt,\n      silent = true,\n      scale,\n      listenEvents,\n      filter,\n      adapter,\n      observer,\n      observerOptions\n    }) {\n      this.mode = modeType.event;\n      this.listeners = [];\n      this.targetIndex = 0;\n      this.targets = [];\n      this.options = {\n        silent,\n        dispatchEvent: !!dispatchEvent,\n        throttleWait: throttleWait || 200,\n        preLoad: preLoad || 1.3,\n        preLoadTop: preLoadTop || 0,\n        error: error || DEFAULT_URL,\n        loading: loading || DEFAULT_URL,\n        attempt: attempt || 3,\n        scale: scale || getDPR(scale),\n        ListenEvents: listenEvents || DEFAULT_EVENTS,\n        supportWebp: supportWebp(),\n        filter: filter || {},\n        adapter: adapter || {},\n        observer: !!observer,\n        observerOptions: observerOptions || DEFAULT_OBSERVER_OPTIONS\n      };\n      this.initEvent();\n      this.imageCache = new ImageCache({\n        max: 200\n      });\n      this.lazyLoadHandler = throttle(this.lazyLoadHandler.bind(this), this.options.throttleWait);\n      this.setMode(this.options.observer ? modeType.observer : modeType.event);\n    }\n\n    config(options = {}) {\n      Object.assign(this.options, options);\n    }\n\n    performance() {\n      return this.listeners.map(item => item.performance());\n    }\n\n    addLazyBox(vm) {\n      this.listeners.push(vm);\n\n      if (inBrowser) {\n        this.addListenerTarget(window);\n        this.observer && this.observer.observe(vm.el);\n\n        if (vm.$el && vm.$el.parentNode) {\n          this.addListenerTarget(vm.$el.parentNode);\n        }\n      }\n    }\n\n    add(el, binding, vnode) {\n      if (this.listeners.some(item => item.el === el)) {\n        this.update(el, binding);\n        return nextTick(this.lazyLoadHandler);\n      }\n\n      const value = this.valueFormatter(binding.value);\n      let {\n        src\n      } = value;\n      nextTick(() => {\n        src = getBestSelectionFromSrcset(el, this.options.scale) || src;\n        this.observer && this.observer.observe(el);\n        const container = Object.keys(binding.modifiers)[0];\n        let $parent;\n\n        if (container) {\n          $parent = vnode.context.$refs[container];\n          $parent = $parent ? $parent.$el || $parent : document.getElementById(container);\n        }\n\n        if (!$parent) {\n          $parent = getScrollParent(el);\n        }\n\n        const newListener = new ReactiveListener({\n          bindType: binding.arg,\n          $parent,\n          el,\n          src,\n          loading: value.loading,\n          error: value.error,\n          cors: value.cors,\n          elRenderer: this.elRenderer.bind(this),\n          options: this.options,\n          imageCache: this.imageCache\n        });\n        this.listeners.push(newListener);\n\n        if (inBrowser) {\n          this.addListenerTarget(window);\n          this.addListenerTarget($parent);\n        }\n\n        this.lazyLoadHandler();\n        nextTick(() => this.lazyLoadHandler());\n      });\n    }\n\n    update(el, binding, vnode) {\n      const value = this.valueFormatter(binding.value);\n      let {\n        src\n      } = value;\n      src = getBestSelectionFromSrcset(el, this.options.scale) || src;\n      const exist = this.listeners.find(item => item.el === el);\n\n      if (!exist) {\n        this.add(el, binding, vnode);\n      } else {\n        exist.update({\n          src,\n          error: value.error,\n          loading: value.loading\n        });\n      }\n\n      if (this.observer) {\n        this.observer.unobserve(el);\n        this.observer.observe(el);\n      }\n\n      this.lazyLoadHandler();\n      nextTick(() => this.lazyLoadHandler());\n    }\n\n    remove(el) {\n      if (!el) return;\n      this.observer && this.observer.unobserve(el);\n      const existItem = this.listeners.find(item => item.el === el);\n\n      if (existItem) {\n        this.removeListenerTarget(existItem.$parent);\n        this.removeListenerTarget(window);\n        remove(this.listeners, existItem);\n        existItem.$destroy();\n      }\n    }\n\n    removeComponent(vm) {\n      if (!vm) return;\n      remove(this.listeners, vm);\n      this.observer && this.observer.unobserve(vm.el);\n\n      if (vm.$parent && vm.$el.parentNode) {\n        this.removeListenerTarget(vm.$el.parentNode);\n      }\n\n      this.removeListenerTarget(window);\n    }\n\n    setMode(mode) {\n      if (!hasIntersectionObserver && mode === modeType.observer) {\n        mode = modeType.event;\n      }\n\n      this.mode = mode;\n\n      if (mode === modeType.event) {\n        if (this.observer) {\n          this.listeners.forEach(listener => {\n            this.observer.unobserve(listener.el);\n          });\n          this.observer = null;\n        }\n\n        this.targets.forEach(target => {\n          this.initListen(target.el, true);\n        });\n      } else {\n        this.targets.forEach(target => {\n          this.initListen(target.el, false);\n        });\n        this.initIntersectionObserver();\n      }\n    }\n\n    addListenerTarget(el) {\n      if (!el) return;\n      let target = this.targets.find(target2 => target2.el === el);\n\n      if (!target) {\n        target = {\n          el,\n          id: ++this.targetIndex,\n          childrenCount: 1,\n          listened: true\n        };\n        this.mode === modeType.event && this.initListen(target.el, true);\n        this.targets.push(target);\n      } else {\n        target.childrenCount++;\n      }\n\n      return this.targetIndex;\n    }\n\n    removeListenerTarget(el) {\n      this.targets.forEach((target, index) => {\n        if (target.el === el) {\n          target.childrenCount--;\n\n          if (!target.childrenCount) {\n            this.initListen(target.el, false);\n            this.targets.splice(index, 1);\n            target = null;\n          }\n        }\n      });\n    }\n\n    initListen(el, start) {\n      this.options.ListenEvents.forEach(evt => (start ? on : off)(el, evt, this.lazyLoadHandler));\n    }\n\n    initEvent() {\n      this.Event = {\n        listeners: {\n          loading: [],\n          loaded: [],\n          error: []\n        }\n      };\n\n      this.$on = (event, func) => {\n        if (!this.Event.listeners[event]) this.Event.listeners[event] = [];\n        this.Event.listeners[event].push(func);\n      };\n\n      this.$once = (event, func) => {\n        const on2 = (...args) => {\n          this.$off(event, on2);\n          func.apply(this, args);\n        };\n\n        this.$on(event, on2);\n      };\n\n      this.$off = (event, func) => {\n        if (!func) {\n          if (!this.Event.listeners[event]) return;\n          this.Event.listeners[event].length = 0;\n          return;\n        }\n\n        remove(this.Event.listeners[event], func);\n      };\n\n      this.$emit = (event, context, inCache) => {\n        if (!this.Event.listeners[event]) return;\n        this.Event.listeners[event].forEach(func => func(context, inCache));\n      };\n    }\n\n    lazyLoadHandler() {\n      const freeList = [];\n      this.listeners.forEach(listener => {\n        if (!listener.el || !listener.el.parentNode) {\n          freeList.push(listener);\n        }\n\n        const catIn = listener.checkInView();\n        if (!catIn) return;\n        listener.load();\n      });\n      freeList.forEach(item => {\n        remove(this.listeners, item);\n        item.$destroy();\n      });\n    }\n\n    initIntersectionObserver() {\n      if (!hasIntersectionObserver) {\n        return;\n      }\n\n      this.observer = new IntersectionObserver(this.observerHandler.bind(this), this.options.observerOptions);\n\n      if (this.listeners.length) {\n        this.listeners.forEach(listener => {\n          this.observer.observe(listener.el);\n        });\n      }\n    }\n\n    observerHandler(entries) {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          this.listeners.forEach(listener => {\n            if (listener.el === entry.target) {\n              if (listener.state.loaded) return this.observer.unobserve(listener.el);\n              listener.load();\n            }\n          });\n        }\n      });\n    }\n\n    elRenderer(listener, state, cache) {\n      if (!listener.el) return;\n      const {\n        el,\n        bindType\n      } = listener;\n      let src;\n\n      switch (state) {\n        case \"loading\":\n          src = listener.loading;\n          break;\n\n        case \"error\":\n          src = listener.error;\n          break;\n\n        default:\n          ({\n            src\n          } = listener);\n          break;\n      }\n\n      if (bindType) {\n        el.style[bindType] = 'url(\"' + src + '\")';\n      } else if (el.getAttribute(\"src\") !== src) {\n        el.setAttribute(\"src\", src);\n      }\n\n      el.setAttribute(\"lazy\", state);\n      this.$emit(state, listener, cache);\n      this.options.adapter[state] && this.options.adapter[state](listener, this.options);\n\n      if (this.options.dispatchEvent) {\n        const event = new CustomEvent(state, {\n          detail: listener\n        });\n        el.dispatchEvent(event);\n      }\n    }\n\n    valueFormatter(value) {\n      let src = value;\n      let {\n        loading,\n        error\n      } = this.options;\n\n      if (isObject(value)) {\n        if (process.env.NODE_ENV !== \"production\" && !value.src && !this.options.silent) {\n          console.error(\"[@vant/lazyload] miss src with \" + value);\n        }\n\n        ({\n          src\n        } = value);\n        loading = value.loading || this.options.loading;\n        error = value.error || this.options.error;\n      }\n\n      return {\n        src,\n        loading,\n        error\n      };\n    }\n\n  };\n}\n\nexport { stdin_default as default };","map":{"version":3,"names":["nextTick","inBrowser","getScrollParent","remove","on","off","throttle","supportWebp","getDPR","getBestSelectionFromSrcset","hasIntersectionObserver","modeType","ImageCache","isObject","ReactiveListener","DEFAULT_URL","DEFAULT_EVENTS","DEFAULT_OBSERVER_OPTIONS","rootMargin","threshold","stdin_default","Lazy","constructor","preLoad","error","throttleWait","preLoadTop","dispatchEvent","loading","attempt","silent","scale","listenEvents","filter","adapter","observer","observerOptions","mode","event","listeners","targetIndex","targets","options","ListenEvents","initEvent","imageCache","max","lazyLoadHandler","bind","setMode","config","Object","assign","performance","map","item","addLazyBox","vm","push","addListenerTarget","window","observe","el","$el","parentNode","add","binding","vnode","some","update","value","valueFormatter","src","container","keys","modifiers","$parent","context","$refs","document","getElementById","newListener","bindType","arg","cors","elRenderer","exist","find","unobserve","existItem","removeListenerTarget","$destroy","removeComponent","forEach","listener","target","initListen","initIntersectionObserver","target2","id","childrenCount","listened","index","splice","start","evt","Event","loaded","$on","func","$once","on2","args","$off","apply","length","$emit","inCache","freeList","catIn","checkInView","load","IntersectionObserver","observerHandler","entries","entry","isIntersecting","state","cache","style","getAttribute","setAttribute","CustomEvent","detail","process","env","NODE_ENV","console","default"],"sources":["D:/web/my-blog/node_modules/vant/es/lazyload/vue-lazyload/lazy.mjs"],"sourcesContent":["import { nextTick } from \"vue\";\nimport { inBrowser, getScrollParent } from \"@vant/use\";\nimport {\n  remove,\n  on,\n  off,\n  throttle,\n  supportWebp,\n  getDPR,\n  getBestSelectionFromSrcset,\n  hasIntersectionObserver,\n  modeType,\n  ImageCache\n} from \"./util.mjs\";\nimport { isObject } from \"../../utils/index.mjs\";\nimport ReactiveListener from \"./listener.mjs\";\nconst DEFAULT_URL = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\nconst DEFAULT_EVENTS = [\n  \"scroll\",\n  \"wheel\",\n  \"mousewheel\",\n  \"resize\",\n  \"animationend\",\n  \"transitionend\",\n  \"touchmove\"\n];\nconst DEFAULT_OBSERVER_OPTIONS = {\n  rootMargin: \"0px\",\n  threshold: 0\n};\nfunction stdin_default() {\n  return class Lazy {\n    constructor({\n      preLoad,\n      error,\n      throttleWait,\n      preLoadTop,\n      dispatchEvent,\n      loading,\n      attempt,\n      silent = true,\n      scale,\n      listenEvents,\n      filter,\n      adapter,\n      observer,\n      observerOptions\n    }) {\n      this.mode = modeType.event;\n      this.listeners = [];\n      this.targetIndex = 0;\n      this.targets = [];\n      this.options = {\n        silent,\n        dispatchEvent: !!dispatchEvent,\n        throttleWait: throttleWait || 200,\n        preLoad: preLoad || 1.3,\n        preLoadTop: preLoadTop || 0,\n        error: error || DEFAULT_URL,\n        loading: loading || DEFAULT_URL,\n        attempt: attempt || 3,\n        scale: scale || getDPR(scale),\n        ListenEvents: listenEvents || DEFAULT_EVENTS,\n        supportWebp: supportWebp(),\n        filter: filter || {},\n        adapter: adapter || {},\n        observer: !!observer,\n        observerOptions: observerOptions || DEFAULT_OBSERVER_OPTIONS\n      };\n      this.initEvent();\n      this.imageCache = new ImageCache({ max: 200 });\n      this.lazyLoadHandler = throttle(this.lazyLoadHandler.bind(this), this.options.throttleWait);\n      this.setMode(this.options.observer ? modeType.observer : modeType.event);\n    }\n    config(options = {}) {\n      Object.assign(this.options, options);\n    }\n    performance() {\n      return this.listeners.map((item) => item.performance());\n    }\n    addLazyBox(vm) {\n      this.listeners.push(vm);\n      if (inBrowser) {\n        this.addListenerTarget(window);\n        this.observer && this.observer.observe(vm.el);\n        if (vm.$el && vm.$el.parentNode) {\n          this.addListenerTarget(vm.$el.parentNode);\n        }\n      }\n    }\n    add(el, binding, vnode) {\n      if (this.listeners.some((item) => item.el === el)) {\n        this.update(el, binding);\n        return nextTick(this.lazyLoadHandler);\n      }\n      const value = this.valueFormatter(binding.value);\n      let { src } = value;\n      nextTick(() => {\n        src = getBestSelectionFromSrcset(el, this.options.scale) || src;\n        this.observer && this.observer.observe(el);\n        const container = Object.keys(binding.modifiers)[0];\n        let $parent;\n        if (container) {\n          $parent = vnode.context.$refs[container];\n          $parent = $parent ? $parent.$el || $parent : document.getElementById(container);\n        }\n        if (!$parent) {\n          $parent = getScrollParent(el);\n        }\n        const newListener = new ReactiveListener({\n          bindType: binding.arg,\n          $parent,\n          el,\n          src,\n          loading: value.loading,\n          error: value.error,\n          cors: value.cors,\n          elRenderer: this.elRenderer.bind(this),\n          options: this.options,\n          imageCache: this.imageCache\n        });\n        this.listeners.push(newListener);\n        if (inBrowser) {\n          this.addListenerTarget(window);\n          this.addListenerTarget($parent);\n        }\n        this.lazyLoadHandler();\n        nextTick(() => this.lazyLoadHandler());\n      });\n    }\n    update(el, binding, vnode) {\n      const value = this.valueFormatter(binding.value);\n      let { src } = value;\n      src = getBestSelectionFromSrcset(el, this.options.scale) || src;\n      const exist = this.listeners.find((item) => item.el === el);\n      if (!exist) {\n        this.add(el, binding, vnode);\n      } else {\n        exist.update({\n          src,\n          error: value.error,\n          loading: value.loading\n        });\n      }\n      if (this.observer) {\n        this.observer.unobserve(el);\n        this.observer.observe(el);\n      }\n      this.lazyLoadHandler();\n      nextTick(() => this.lazyLoadHandler());\n    }\n    remove(el) {\n      if (!el)\n        return;\n      this.observer && this.observer.unobserve(el);\n      const existItem = this.listeners.find((item) => item.el === el);\n      if (existItem) {\n        this.removeListenerTarget(existItem.$parent);\n        this.removeListenerTarget(window);\n        remove(this.listeners, existItem);\n        existItem.$destroy();\n      }\n    }\n    removeComponent(vm) {\n      if (!vm)\n        return;\n      remove(this.listeners, vm);\n      this.observer && this.observer.unobserve(vm.el);\n      if (vm.$parent && vm.$el.parentNode) {\n        this.removeListenerTarget(vm.$el.parentNode);\n      }\n      this.removeListenerTarget(window);\n    }\n    setMode(mode) {\n      if (!hasIntersectionObserver && mode === modeType.observer) {\n        mode = modeType.event;\n      }\n      this.mode = mode;\n      if (mode === modeType.event) {\n        if (this.observer) {\n          this.listeners.forEach((listener) => {\n            this.observer.unobserve(listener.el);\n          });\n          this.observer = null;\n        }\n        this.targets.forEach((target) => {\n          this.initListen(target.el, true);\n        });\n      } else {\n        this.targets.forEach((target) => {\n          this.initListen(target.el, false);\n        });\n        this.initIntersectionObserver();\n      }\n    }\n    addListenerTarget(el) {\n      if (!el)\n        return;\n      let target = this.targets.find((target2) => target2.el === el);\n      if (!target) {\n        target = {\n          el,\n          id: ++this.targetIndex,\n          childrenCount: 1,\n          listened: true\n        };\n        this.mode === modeType.event && this.initListen(target.el, true);\n        this.targets.push(target);\n      } else {\n        target.childrenCount++;\n      }\n      return this.targetIndex;\n    }\n    removeListenerTarget(el) {\n      this.targets.forEach((target, index) => {\n        if (target.el === el) {\n          target.childrenCount--;\n          if (!target.childrenCount) {\n            this.initListen(target.el, false);\n            this.targets.splice(index, 1);\n            target = null;\n          }\n        }\n      });\n    }\n    initListen(el, start) {\n      this.options.ListenEvents.forEach((evt) => (start ? on : off)(el, evt, this.lazyLoadHandler));\n    }\n    initEvent() {\n      this.Event = {\n        listeners: {\n          loading: [],\n          loaded: [],\n          error: []\n        }\n      };\n      this.$on = (event, func) => {\n        if (!this.Event.listeners[event])\n          this.Event.listeners[event] = [];\n        this.Event.listeners[event].push(func);\n      };\n      this.$once = (event, func) => {\n        const on2 = (...args) => {\n          this.$off(event, on2);\n          func.apply(this, args);\n        };\n        this.$on(event, on2);\n      };\n      this.$off = (event, func) => {\n        if (!func) {\n          if (!this.Event.listeners[event])\n            return;\n          this.Event.listeners[event].length = 0;\n          return;\n        }\n        remove(this.Event.listeners[event], func);\n      };\n      this.$emit = (event, context, inCache) => {\n        if (!this.Event.listeners[event])\n          return;\n        this.Event.listeners[event].forEach((func) => func(context, inCache));\n      };\n    }\n    lazyLoadHandler() {\n      const freeList = [];\n      this.listeners.forEach((listener) => {\n        if (!listener.el || !listener.el.parentNode) {\n          freeList.push(listener);\n        }\n        const catIn = listener.checkInView();\n        if (!catIn)\n          return;\n        listener.load();\n      });\n      freeList.forEach((item) => {\n        remove(this.listeners, item);\n        item.$destroy();\n      });\n    }\n    initIntersectionObserver() {\n      if (!hasIntersectionObserver) {\n        return;\n      }\n      this.observer = new IntersectionObserver(this.observerHandler.bind(this), this.options.observerOptions);\n      if (this.listeners.length) {\n        this.listeners.forEach((listener) => {\n          this.observer.observe(listener.el);\n        });\n      }\n    }\n    observerHandler(entries) {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n          this.listeners.forEach((listener) => {\n            if (listener.el === entry.target) {\n              if (listener.state.loaded)\n                return this.observer.unobserve(listener.el);\n              listener.load();\n            }\n          });\n        }\n      });\n    }\n    elRenderer(listener, state, cache) {\n      if (!listener.el)\n        return;\n      const { el, bindType } = listener;\n      let src;\n      switch (state) {\n        case \"loading\":\n          src = listener.loading;\n          break;\n        case \"error\":\n          src = listener.error;\n          break;\n        default:\n          ({ src } = listener);\n          break;\n      }\n      if (bindType) {\n        el.style[bindType] = 'url(\"' + src + '\")';\n      } else if (el.getAttribute(\"src\") !== src) {\n        el.setAttribute(\"src\", src);\n      }\n      el.setAttribute(\"lazy\", state);\n      this.$emit(state, listener, cache);\n      this.options.adapter[state] && this.options.adapter[state](listener, this.options);\n      if (this.options.dispatchEvent) {\n        const event = new CustomEvent(state, {\n          detail: listener\n        });\n        el.dispatchEvent(event);\n      }\n    }\n    valueFormatter(value) {\n      let src = value;\n      let { loading, error } = this.options;\n      if (isObject(value)) {\n        if (process.env.NODE_ENV !== \"production\" && !value.src && !this.options.silent) {\n          console.error(\"[@vant/lazyload] miss src with \" + value);\n        }\n        ({ src } = value);\n        loading = value.loading || this.options.loading;\n        error = value.error || this.options.error;\n      }\n      return {\n        src,\n        loading,\n        error\n      };\n    }\n  };\n}\nexport {\n  stdin_default as default\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}